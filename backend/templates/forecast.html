<!-- templates/forecast.html -->
{% extends "base.html" %}

{% block title %}ForecastIt | Forecast{% endblock %}
{% block header_subtitle %}Generate and analyze your sales forecasts{% endblock %}

{% block extra_head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    /* Additional forecast-specific styles */
    .actions {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
    }

    .actions button {
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        background-color: var(--primary);
        color: white;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .actions button:hover {
        background-color: #5a4bc2;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
    }

    .decision-content {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .decision-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        background: rgba(108, 92, 231, 0.05);
        border-radius: 8px;
    }

    .decision-icon {
        font-size: 1.2rem;
    }

    canvas {
        width: 100% !important;
        height: 250px !important;
        margin-bottom: 15px;
    }
</style>
{% endblock %}

{% block content %}
<section class="forecast-section">
    <div class="actions">
        <button>
            <span>üìä</span> Enter Desired Threshold
        </button>
        <button>
            <span>üìÅ</span> Upload CSV File
        </button>
        <button>
            <span>‚ú®</span> Generate Graph & Decisions
        </button>
    </div>
    <div class="grid">
        <div class="card">
            <h3>Recent Forecast</h3>
            <canvas id="forecastChart"></canvas>
            <div class="stats">
                <div class="stat-item">
                    <span class="indicator purple"></span>
                    <p>Forecast: <strong>3,000 sales</strong></p>
                </div>
                <div class="stat-item">
                    <span class="indicator green"></span>
                    <p>Produced: <strong>4,000</strong></p>
                </div>
            </div>
        </div>
        <div class="card">
            <h3>Predictions Analysis</h3>
            <canvas id="predictionsChart"></canvas>
            <div class="stats">
                <div class="stat-item">
                    <span class="indicator purple"></span>
                    <p>Next Month: <strong>+12%</strong></p>
                </div>
                <div class="stat-item">
                    <span class="indicator green"></span>
                    <p>Confidence: <strong>85%</strong></p>
                </div>
            </div>
        </div>
        <div class="card full-width">
            <h3>Recommended Decisions</h3>
            <div class="decision-content">
                <div class="decision-item">
                    <span class="decision-icon">üìà</span>
                    <p>Increase production by <strong>15%</strong> for next quarter</p>
                </div>
                <div class="decision-item">
                    <span class="decision-icon">üìâ</span>
                    <p>Reduce inventory for Product X by <strong>20%</strong></p>
                </div>
                <div class="decision-item">
                    <span class="decision-icon">üîÑ</span>
                    <p>Reallocate <strong>30%</strong> of marketing budget to top-performing regions</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // Forecast Chart
        const forecastCtx = document.getElementById('forecastChart').getContext('2d');
        const forecastChart = new Chart(forecastCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [
                    {
                        label: 'Forecast',
                        data: [2000, 2200, 2500, 2800, 3000, 3200],
                        borderColor: '#9C27B0',
                        backgroundColor: 'rgba(156, 39, 176, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Actual',
                        data: [1900, 2100, 2400, 2700, 3000, 4000],
                        borderColor: '#00B894',
                        backgroundColor: 'rgba(0, 184, 148, 0.1)',
                        tension: 0.3,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Predictions Chart
        const predictionsCtx = document.getElementById('predictionsChart').getContext('2d');
        const predictionsChart = new Chart(predictionsCtx, {
            type: 'bar',
            data: {
                labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                datasets: [
                    {
                        label: 'Predicted Sales',
                        data: [8500, 9200, 10500, 12000],
                        backgroundColor: 'rgba(108, 92, 231, 0.7)',
                        borderRadius: 6
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Button functionality
        document.querySelectorAll('.actions button').forEach(button => {
            button.addEventListener('click', () => {
                alert(`"${button.textContent.trim()}" functionality would be implemented here`);
            });
        });
    });
</script>
{% endblock %}