<!-- templates/forecast.html -->
{% extends "base.html" %}

{% block title %}Forecastrix | Forecast{% endblock %}
{% block header_subtitle %}Generate and analyze your sales forecasts{% endblock %}

{% block extra_head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/forecast.css') }}">
{% endblock %}

{% block content %}
<section class="forecast-section">
    <div class="actions">
        <button id="threshold-btn" class="action-btn">
            <span>📊</span> Set Threshold
        </button>
        
        <div class="file-upload-wrapper">
            <button class="file-upload-button">
                <span>📁</span> Upload CSV
            </button>
            <input type="file" id="upload-btn" class="file-upload-input" accept=".csv">
        </div>
        
        <div class="product-selector">
            <select id="product-select" disabled>
                <option value="all">All Products</option>
            </select>
        </div>
        
        <button id="generate-btn" class="action-btn" disabled>
            <span>✨</span> Generate Forecast
        </button>
        
        <button id="reset-btn" class="action-btn">
            <span>🔄</span> Reset
        </button>
    </div>

    <div class="bento-container">
        <div class="bento-box">
            <div class="chart-title">
                <h3>Sales Forecast</h3>
                <span id="product-badge-1" class="product-badge">All Products</span>
            </div>
            <canvas id="forecastChart"></canvas>
            <div id="sales-summary" class="sales-summary" style="display: none;">
                <div class="total-sales">
                    Total Forecasted Sales: <span id="total-sales-value" class="total-sales-value">0</span>
                </div>
                <div class="sales-badge">
                    <span>💰</span>Sales Prediction
                </div>
            </div>
        </div>

        <div class="bento-box">
            <div class="chart-title">
                <h3>Predictions Analysis</h3>
                <span id="product-badge-2" class="product-badge">All Products</span>
            </div>
            <canvas id="predictionsChart"></canvas>
        </div>

        <div class="bento-box full-width">
            <div class="chart-title">
                <h3>Recommended Actions</h3>
                <span id="product-badge-3" class="product-badge">All Products</span>
            </div>
            <div id="decision-section" class="decision-content">
                <div class="empty-state">
                    <div class="empty-state-icon">📊</div>
                    <p class="empty-state-text">Upload your data and generate a forecast to see recommendations</p>
                </div>
            </div>
            <div class="decision-pagination">
                <button id="prev-btn" class="pagination-btn" disabled>← Previous</button>
                <span id="page-indicator">Page 1 of 1</span>
                <button id="next-btn" class="pagination-btn" disabled>Next →</button>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/forecast.js') }}"></script>
{% endblock %}