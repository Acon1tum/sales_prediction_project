{% extends "base.html" %}

{% block title %}Forecastrix | Statistics{% endblock %}
{% block header_subtitle %}Business Analytics and Statistics{% endblock %}

{% block extra_head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/statistics.css') }}">
{% endblock %}

{% block content %}
<section class="statistics">
    <!-- Add filter controls -->
    <div class="filter-controls">
        <div class="filter-group">
            <label for="forecastLimit">Show:</label>
            <select id="forecastLimit" class="form-select">
                <option value="10">10 Most Recent</option>
                <option value="20">20 Most Recent</option>
                <option value="50">50 Most Recent</option>
                <option value="all" selected>All Forecasts</option>
            </select>
        </div>
    </div>

    <div class="stats-grid">
        <!-- Product Performance -->
        <div class="stat-card">
            <h3 data-tooltip="Shows the distribution of forecasts across different products, helping identify which products are being forecasted most frequently.">Product Performance</h3>
            <div class="graph-container">
                <canvas id="productChart"></canvas>
            </div>
        </div>

        <!-- Trend Analysis -->
        <div class="stat-card">
            <h3 data-tooltip="Displays the proportion of positive, negative, and neutral trends in your forecasts, helping identify overall market direction.">Trend Analysis</h3>
            <div class="graph-container">
                <canvas id="trendChart"></canvas>
            </div>
        </div>

        <!-- Severity Distribution -->
        <div class="stat-card">
            <h3 data-tooltip="Shows the distribution of forecast severity levels, helping identify the frequency of high-impact predictions.">Severity Distribution</h3>
            <div class="graph-container">
                <canvas id="severityChart"></canvas>
            </div>
        </div>

        <!-- Monthly Forecasts -->
        <div class="stat-card">
            <h3 data-tooltip="Tracks the number of forecasts generated each month, helping identify patterns in forecasting activity over time.">Monthly Forecast Activity</h3>
            <div class="graph-container">
                <canvas id="monthlyChart"></canvas>
            </div>
        </div>

        <!-- Prediction Ranges -->
        <div class="stat-card">
            <h3 data-tooltip="Shows the distribution of predicted sales volumes across different ranges, helping identify typical sales patterns.">Prediction Ranges</h3>
            <div class="graph-container">
                <canvas id="rangeChart"></canvas>
            </div>
        </div>

        <!-- Forecast Types -->
        <div class="stat-card">
            <h3 data-tooltip="Shows the distribution of different forecast types used, helping understand the variety of forecasting approaches employed.">Forecast Types</h3>
            <div class="graph-container">
                <canvas id="typeChart"></canvas>
            </div>
        </div>

        <!-- Threshold Comparison -->
        <div class="stat-card">
            <h3 data-tooltip="Compares predictions against set thresholds, helping identify how often forecasts exceed or fall below target values.">Threshold Comparison</h3>
            <div class="graph-container">
                <canvas id="thresholdChart"></canvas>
            </div>
        </div>

        <!-- Average Predictions -->
        <div class="stat-card">
            <h3 data-tooltip="Shows the average predicted sales for each product, helping identify which products typically have higher or lower sales forecasts.">Average Predictions by Product</h3>
            <div class="graph-container">
                <canvas id="averageChart"></canvas>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/statistics.js') }}"></script>
{% endblock %} 